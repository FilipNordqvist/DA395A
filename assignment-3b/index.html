<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>

<body>
  <div class="container">
    <h1>MovieFinder - King of movies</h1>
    <h2 style="font-size:2vw">Sök efter filmen här</h2>
    <label for="search-field" style="font-size:1.5vw">Titel</label>
    <input type="text" id="search-field" class="form-control" onkeyup="getMovie()">


  </div>


  <div class="container">
    <h2>Sökresultat</h2>
    <ul id="movie-list">

    </ul>
  </div>

  <script>

    async function getMovie() {
      const movieTitle = document.getElementById("search-field").value;
      
      if(movieTitle.length >= 3){
        const response = await fetch("http://www.omdbapi.com/?t=" + movieTitle + "&apikey=f9bc0366&t");
        const data = await response.json();
        const image = data.Poster;
        const year = data.Year;
        console.log("All data: ", data);
        addToMovieList(movieTitle,image,year)
    }else{
     
    }
    $("#add-movie-form").trigger("reset");
    }

    function addToMovieList(title,image, year) {
      const listOfMovies = document.getElementById("movie-list");
      const list = document.createElement("li");
      list.setAttribute("movie-title", title);
      list.textContent = title;
      const imgElement = document.createElement("img")
      imgElement.setAttribute("src", image);
      imgElement.setAttribute("alt", title)
      const spanElement = document.createElement("span");
      spanElement.textContent = year;
      
      list.append(imgElement);
      list.append(spanElement);
      listOfMovies.append(list);
      

      //Fixa så att det blir som en lista och inte stor bild OCH att den hämtar alla filmer som börjar med batman glömt inte återställa

    }


  </script>

</body>

</html>